### **系统 R⁻¹：一个反思性分析系统 (A Reflexive Analytical System)**

#### **1. 语法 (Syntax)**

**1.1. 基础集合**

*   `A`：一个可数的原子项（Atoms）集合。
*   `V`：一个可数的位点标识符（Site Identifiers）集合。
*   `F`：一个带元数（arity）的函数符号（Function Symbols）集合。

**1.2. 系统参数**

系统 R⁻¹ 的定义依赖于一组预定义的**生成组件**：
*   `S`：一个非空的状态集（State Set）。
*   `U`：一个状态更新函数（State Update Function），其签名为 `U: S × C → S`。
*   `G`：一个规则生成函数（Rule Generator Function），其签名为 `G: S × C → R_rules`，其中 `R_rules` 是重写规则的集合。

**1.3. 生成性位点 (Generative Sites)**

一个生成性位点 `σ` 是一个四元组 `(v, s, U, G)`，其中 `v ∈ V`, `s ∈ S`，且 `U`, `G` 为系统参数。`Σ` 是所有可能的生成性位点的集合。

**1.4. 项 (Terms)**

项的集合 `T` 被归纳定义如下：
1.  如果 `a ∈ A`，那么 `a ∈ T`。
2.  如果 `σ ∈ Σ`，那么 `σ ∈ T`。
3.  如果 `f ∈ F`，`arity(f) = n`，并且 `t₁, ..., tₙ ∈ T`，那么 `f(t₁, ..., tₙ) ∈ T`。

**1.5. 上下文 (Contexts)**

上下文的集合 `C` 是带有一个唯一“空位” `[]` 的项。其归纳定义如下：
1.  `[]` 是一个上下文。
2.  如果 `f ∈ F`，`arity(f) = n`，`t₁, ..., tᵢ₋₁, tᵢ₊₁, ..., tₙ ∈ T`，并且 `Cᵢ` 是一个上下文，那么 `f(t₁, ..., tᵢ₋₁, Cᵢ, tᵢ₊₁, ..., tₙ)` 是一个上下文。

若 `C ∈ C` 且 `t ∈ T`，则 `C[t]` 表示将 `C` 中的空位 `[]` 替换为项 `t` 后得到的项。

#### **2. 核心分析组件 (Core Analytical Components)**

**2.1. 前像推断函数 (Preimage Inference Function)**

前像推断函数 `P` 的签名为：
`P: C × T → P(R_rules)`
其中 `P(X)` 表示集合 `X` 的幂集。`P` 接收一个上下文 `C` 和一个子项 `t'`，并推断出所有可能生成 `t'` 的重写规则 `(σ → t')` 的集合。该函数的定义必须与系统参数 `G` 相容。

**2.2. 状态溯源函数 (State Deduction Function)**

状态溯源函数 `D` 的签名为：
`D: S × C → P(S)`
`D` 接收一个状态 `s'` 和一个上下文 `C`，并溯源出所有满足 `U(s, C) = s'` 的前序状态 `s ∈ S` 的集合。该函数的定义必须与系统参数 `U` 相容。

#### **3. 系统动力学 (System Dynamics)**

**3.1. 系统格局 (System Configuration)**

一个系统格局（Configuration）就是一个项 `t ∈ T`。

**3.2. 单步分析关系 (One-Step Analytical Relation)**

系统的单步分析关系 `→ₐ` 是在项集合 `T` 上的一个二元关系。`t₁ →ₐ t₂` 的成立由以下推导规则给出：

```
t = C[t']                                          (1. 前提)
RuleSet = P(C, t')                                  (2. 应用前像推断)
(σ_gen → t') ∈ RuleSet                              (3. 非确定性选择一个候选规则)
s'_gen = state(σ_gen)                               (4. 提取规则中的后序状态)
StateSet = D(s'_gen, C)                             (5. 应用状态溯源)
s_pre ∈ StateSet                                    (6. 非确定性选择一个前序状态)
σ_recon = (id(σ_gen), s_pre, U, G)                   (7. 重构生成性位点)
---------------------------------------------------------------------------------------
              C[t'] →ₐ C[σ_recon]                      (结论)
```

其中，对于位点 `σ = (v, s, U, G)`，投影函数 `id(σ)` 返回 `v`，`state(σ)` 返回 `s`。关系 `→ₐ*` 是 `→ₐ` 的自反传递闭包。