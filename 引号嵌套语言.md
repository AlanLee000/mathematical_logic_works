# **一个基于引用与构成的形式系统**

## **1. 语法 (Syntax)**

**1.1 基础集合**
*   **原子 (Atoms)**: 一个可数的集合 `A`。其中包含一个特殊原子 `ε`，代表空序列。
    *   *示例*: `A = {ε, 'a', 'b', 'x', 'node1', ...}`
*   **谓词原子 (Predicate Atoms)**: 一个可数的集合 `P`。其中包含一个特殊的谓词 `C`，称为**构成谓词 (Constitutes)**。
    *   *示例*: `P = {C, 'name', 'age', 'parent_of', ...}`

**1.2 归纳定义**
*   **项 (Terms)**: 项的集合 `T` 被归纳定义如下：
    1.  **基础**: 如果 `a ∈ A`，那么 `a ∈ T`。
    2.  **归纳**: 如果 `t₁ ∈ T` 且 `t₂ ∈ T`，那么二元对 `(t₁, t₂)` 也是一个项，即 `(t₁, t₂) ∈ T`。
    *   *注记*: 此定义生成了所有以原子为叶节点的有限二叉树。`ε` 通常用于终结一个序列，例如，列表 `['a', 'b']` 可表示为 `('a', ('b', ε))`。

*   **公式 (Formulas)**: 公式的集合 `F` 定义如下：
    *   如果 `p ∈ P`，`s ∈ T` 且 `o ∈ T`，那么三元组 `(p, s, o)` 是一个公式。我们通常将其记为 `p(s) = o`。
    *   *示例*: `('name', 'person1', 'Alice')`，记为 `name('person1') = 'Alice'`。

## **2. 知识库与公理 (Knowledge Base & Axioms)**

**2.1 知识库**
*   一个**知识库 (Knowledge Base)**，记为 `KB`，是公式集合 `F` 的一个有限子集。
*   `KB` 必须满足以下公理。

**2.2 公理**
一个知识库 `KB` 是**良构的 (well-formed)**，当且仅当它满足以下两个公理：

*   **公理 1：构成谓词的函数性 (Functionality of Constitutes)**
    一个项最多只能被构成一次，以确保引用的无歧义性。
    *   **形式化**: `∀s, o₁, o₂ ∈ T . (C(s) = o₁ ∈ KB ∧ C(s) = o₂ ∈ KB) → o₁ ≡ o₂`
    *   其中 `≡` 表示项的**结构相等**。

*   **公理 2：构成谓词的非循环性 (Acyclicity of Constitutes)**
    项的构成关系必须是良基的，禁止任何形式的循环定义。
    *   **定义**: 我们定义一个依赖关系 `≺`。对于项 `t₁, t₂`，`t₁ ≺ t₂` (读作 `t₂` 依赖于 `t₁`) 当且仅当存在一个项 `o`，使得 `C(t₂) = o ∈ KB` 且 `t₁` 是 `o` 的一个**子项 (sub-term)**。
        *   *子项的定义：`t` 是 `t` 的子项；`t₁` 和 `t₂` 是 `(t₁, t₂)` 的子项；如果 `t'` 是 `t` 的子项，`t''` 是 `t'` 的子项，那么 `t''` 也是 `t` 的子项。*
    *   **形式化**: `≺` 的传递闭包 `≺⁺` 必须是**反自反的**。即：
        `∀t ∈ T . ¬(t ≺⁺ t)`
    *   这意味着由 `C` 谓词形成的依赖关系图必须是一个**有向无环图 (DAG)**。

## **3. 语义 (Semantics)**

系统的核心语义通过一个求值函数 `eval` 来定义，该函数将一个项在给定知识库的上下文中解析为其最终的结构。

**3.1 求值函数 (Evaluation Function)**
*   `eval` 函数是一个映射 `eval: T × KB → T`，其定义如下（其中 `KB` 是一个良构的知识库）：

    1.  **对于二元对**:
        `eval((t₁, t₂), KB) = (eval(t₁, KB), eval(t₂, KB))`

    2.  **对于原子**:
        `eval(a, KB) = `
        *   `eval(o, KB)`, 如果在 `KB` 中存在唯一的公式 `C(a) = o`。
        *   `a`, 如果在 `KB` 中不存在以 `a` 为主语的 `C` 公式。

*   **良定义性**: 公理2（非循环性）保证了对于任何项 `t` 和良构的知识库 `KB`，`eval(t, KB)` 的计算过程必将在有限步骤内终止。

**3.2 公式的解释**
*   一个在知识库 `KB` 中的公式 `p(s) = o`（其中 `p ≠ C`）是一个**语法断言**。
*   其**语义解释**是关于其主语和宾语求值后的关系。例如，一个查询操作会验证 `p(eval(s, KB))` 与 `eval(o, KB)` 之间的关系是否成立。 `KB` 本身存储的是符号层面的事实，而 `eval` 函数则揭示了这些符号所代表的深层结构。